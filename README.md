# Video2Note

> **AI é©±åŠ¨çš„è§†é¢‘è½¬ PPT å·¥å…·**

[![FastAPI](https://img.shields.io/badge/Backend-FastAPI-009688.svg?style=flat-square&logo=fastapi&logoColor=white)](https://fastapi.tiangolo.com/)
[![React](https://img.shields.io/badge/Frontend-React_19-61DAFB.svg?style=flat-square&logo=react&logoColor=black)](https://reactjs.org/)
[![TailwindCSS](https://img.shields.io/badge/Style-TailwindCSS-06B6D4.svg?style=flat-square&logo=tailwindcss&logoColor=white)](https://tailwindcss.com/)
[![PyTorch](https://img.shields.io/badge/AI-PyTorch_CUDA-EE4C2C.svg?style=flat-square&logo=pytorch&logoColor=white)](https://pytorch.org/)

ä¸Šä¼ è¯¾ç¨‹å½•å±ã€ä¼šè®®è§†é¢‘æˆ–æ¼”è®²è§†é¢‘ï¼ŒAI è‡ªåŠ¨åˆ†æå…³é”®å¸§ï¼Œæå–æ¸…æ™°å¹»ç¯ç‰‡ï¼Œå¹¶ç”Ÿæˆå¯ç¼–è¾‘çš„ PPTX æ–‡ä»¶ã€‚

---

## ç›®å½•

- [âœ¨ æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)
- [ğŸ”§ æŠ€æœ¯æ¶æ„](#-æŠ€æœ¯æ¶æ„)
- [ğŸš€ å¿«é€Ÿå¯åŠ¨](#-å¿«é€Ÿå¯åŠ¨)
- [ğŸ“ é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [ğŸ¯ æ ¸å¿ƒç®—æ³•è¯¦è§£](#-æ ¸å¿ƒç®—æ³•è¯¦è§£)
- [ğŸ“¡ API æ¥å£](#-api-æ¥å£)
- [âš™ï¸ é…ç½®å‚æ•°](#ï¸-é…ç½®å‚æ•°)
- [âš ï¸ å¸¸è§é—®é¢˜](#ï¸-å¸¸è§é—®é¢˜)

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **æè‡´ç°ä»£ UI** | é‡‡ç”¨ Vercel é£æ ¼æ·±è‰²æ¨¡å¼è®¾è®¡ï¼ŒFramer Motion æµç•…åŠ¨æ•ˆ |
| **å…¨é“¾è·¯ GPU åŠ é€Ÿ** | PyTorch CUDA + FFmpeg NVENC + PaddleOCR GPU |
| **ä¸‰å±‚æ¼æ–— PPT æå–** | ç‰©ç†å¸§å·® â†’ æ¸…æ™°åº¦æ‹©ä¼˜ â†’ OCR è¯­ä¹‰å»é‡ |
| **æœ¬åœ°è¯­éŸ³è½¬å½•** | FunASR æœ¬åœ°æ¨ç† + Gemini äº‘ç«¯çº é”™ (å¯é€‰) |
| **å®æ—¶è¿›åº¦åé¦ˆ** | å‰ç«¯è½®è¯¢æ˜¾ç¤ºåç«¯å¤„ç†é˜¶æ®µå’Œè¿›åº¦ç™¾åˆ†æ¯” |
| **éšç§å®‰å…¨** | æ‰€æœ‰æ ¸å¿ƒå¤„ç†åœ¨æœ¬åœ°å®Œæˆï¼Œä»…çº é”™åŠŸèƒ½å¯é€‰äº‘ç«¯ |

---

## ğŸ”§ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Video2Note ç³»ç»Ÿæ¶æ„                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          HTTP           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚                      â”‚  â”‚
â”‚  â”‚     Frontend     â”‚     POST /upload        â”‚       Backend        â”‚  â”‚
â”‚  â”‚                  â”‚     GET  /status        â”‚                      â”‚  â”‚
â”‚  â”‚  React 19 + Vite â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  FastAPI + Uvicorn   â”‚  â”‚
â”‚  â”‚  TailwindCSS     â”‚         JSON            â”‚                      â”‚  â”‚
â”‚  â”‚  Framer Motion   â”‚                         â”‚                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚              â”‚
â”‚                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                               â”‚   VideoService       â”‚  â”‚
â”‚                                               â”‚                      â”‚  â”‚
â”‚                                               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚ PPT æå–æ¨¡å—    â”‚  â”‚  â”‚
â”‚                  â”‚   GPU å¤„ç†å•å…ƒ      â”‚       â”‚  â”‚                â”‚  â”‚  â”‚
â”‚                  â”‚                    â”‚       â”‚  â”‚ â€¢ Canny å®šä½   â”‚  â”‚  â”‚
â”‚                  â”‚  â€¢ PyTorch CUDA    â”‚â—€â”€â”€â”€â”€â”€â”€â”‚  â”‚ â€¢ FFmpeg è£å‰ª  â”‚  â”‚  â”‚
â”‚                  â”‚  â€¢ PaddleOCR GPU   â”‚       â”‚  â”‚ â€¢ ä¸‰å±‚æ¼æ–—æå–  â”‚  â”‚  â”‚
â”‚                  â”‚  â€¢ FunASR CUDA     â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                  â”‚  â€¢ FFmpeg NVENC    â”‚       â”‚                      â”‚  â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚                                               â”‚  â”‚ éŸ³é¢‘è½¬å½•æ¨¡å—    â”‚  â”‚  â”‚
â”‚                                               â”‚  â”‚                â”‚  â”‚  â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚ â€¢ moviepy æå– â”‚  â”‚  â”‚
â”‚                  â”‚   äº‘ç«¯æœåŠ¡ (å¯é€‰)   â”‚       â”‚  â”‚ â€¢ FunASR è¯†åˆ«  â”‚  â”‚  â”‚
â”‚                  â”‚                    â”‚â—€â”€â”€â”€â”€â”€â”€â”‚  â”‚ â€¢ Gemini çº é”™  â”‚  â”‚  â”‚
â”‚                  â”‚  â€¢ Gemini 2.5 Flashâ”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆè¯¦æƒ…

#### åç«¯ (Python 3.11)

| æ¨¡å— | æŠ€æœ¯ | ç”¨é€” |
|------|------|------|
| Web æ¡†æ¶ | FastAPI + Uvicorn | å¼‚æ­¥ HTTP æœåŠ¡ |
| è§†é¢‘å¤„ç† | OpenCV + FFmpeg | å®šä½ã€è£å‰ªã€å¸§æå– |
| å¸§å¤„ç† | PyTorch (CUDA) | GPU å¸§å·®æ£€æµ‹ã€æ¸…æ™°åº¦è®¡ç®— |
| OCR | PaddleOCR + PaddlePaddle (GPU) | æ–‡å­—è¯†åˆ«ä¸è¯­ä¹‰å»é‡ |
| è¯­éŸ³è¯†åˆ« | FunASR (CUDA) | æœ¬åœ°è¯­éŸ³è½¬æ–‡å­— |
| PPT ç”Ÿæˆ | python-pptx | å¯¼å‡º PPTX æ–‡ä»¶ |
| æ—¥å¿—ç³»ç»Ÿ | Loguru | ç»“æ„åŒ–å½©è‰²æ—¥å¿— |

#### å‰ç«¯ (Node.js 18+)

| æ¨¡å— | æŠ€æœ¯ | ç”¨é€” |
|------|------|------|
| æ¡†æ¶ | React 19 + Vite 7 | ç°ä»£åŒ– SPA å¼€å‘ |
| æ ·å¼ | TailwindCSS 3 | åŸå­åŒ– CSS |
| åŠ¨ç”» | Framer Motion | å£°æ˜å¼åŠ¨ç”» |
| å›¾æ ‡ | Lucide React | SVG å›¾æ ‡åº“ |
| HTTP | Axios | API è¯·æ±‚ |

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### ç¯å¢ƒè¦æ±‚

| ä¾èµ– | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **Python** | 3.10 - 3.11 | ä¸æ”¯æŒ 3.12 (éƒ¨åˆ† AI åº“å…¼å®¹æ€§) |
| **Node.js** | 18+ | LTS ç‰ˆæœ¬ |
| **CUDA** | 12.x | GPU åŠ é€Ÿ (å¯é€‰ï¼Œè§ä¸‹æ–¹ CPU æ¨¡å¼) |
| **FFmpeg** | 6.x+ | è§†é¢‘è£å‰ª (éœ€åŠ å…¥ PATH) |
| **NVIDIA GPU** | RTX 30/40 ç³»åˆ— | æ¨è (å¯é€‰ï¼Œæ”¯æŒçº¯ CPU æ¨¡å¼) |

### æ–¹å¼ä¸€ï¼šç”Ÿäº§æ¨¡å¼ (æ¨èæ™®é€šç”¨æˆ·)

åŒå‡»é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `build_and_run.bat`ï¼Œè‡ªåŠ¨æ„å»ºå‰ç«¯å¹¶å¯åŠ¨æœåŠ¡ã€‚

```batch
# build_and_run.bat ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
# 1. æ„å»ºå‰ç«¯ç”Ÿäº§ç‰ˆæœ¬
# 2. æ¿€æ´»åç«¯è™šæ‹Ÿç¯å¢ƒ
# 3. å¯åŠ¨ FastAPI æœåŠ¡ (ç«¯å£ 8000ï¼ŒåŒæ—¶æ‰˜ç®¡å‰ç«¯)
```

è®¿é—® http://127.0.0.1:8000

### æ–¹å¼äºŒï¼šå¼€å‘æ¨¡å¼ (ä»…ä¾›å¼€å‘è€…)

åŒå‡»é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `dev.bat`ï¼Œå¯åŠ¨å‰åç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆæ”¯æŒçƒ­æ›´æ–°ï¼‰ã€‚

```batch
# dev.bat ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
# 1. æ¿€æ´»åç«¯è™šæ‹Ÿç¯å¢ƒ
# 2. å¯åŠ¨ FastAPI æœåŠ¡ (ç«¯å£ 8000)
# 3. å¯åŠ¨å‰ç«¯ Vite å¼€å‘æœåŠ¡å™¨ (ç«¯å£ 5173)
```

- å‰ç«¯ï¼šhttp://localhost:5173
- åç«¯ï¼šhttp://127.0.0.1:8000

### æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨å¯åŠ¨

#### 1. åç«¯å¯åŠ¨

```powershell
# è¿›å…¥åç«¯ç›®å½•
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ (é¦–æ¬¡)
python -m venv .venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
.\.venv\Scripts\Activate.ps1

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡
python -m uvicorn app.main:app --reload
```

#### 2. å‰ç«¯å¯åŠ¨

```powershell
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ– (é¦–æ¬¡)
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

#### 3. è®¿é—®åº”ç”¨

| æœåŠ¡ | åœ°å€ |
|------|------|
| å‰ç«¯åº”ç”¨ | http://localhost:5173 |
| åç«¯ API | http://127.0.0.1:8000 |
| API æ–‡æ¡£ | http://127.0.0.1:8000/docs |

### ç¯å¢ƒå˜é‡é…ç½®

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# Gemini API Key (ç”¨äºè½¬å½•çº é”™åŠŸèƒ½ï¼Œå¯é€‰)
GEMINI_API_KEY=your_api_key_here
```

> **æ³¨æ„**: ä¸é…ç½® Gemini API Key ä¸å½±å“ PPT æå–åŠŸèƒ½ï¼Œä»…å½±å“è½¬å½•çº é”™ã€‚

### ä»… CPU æ¨¡å¼å®‰è£…

å¦‚æœæ²¡æœ‰ NVIDIA GPUï¼Œå¯ä»¥ä½¿ç”¨çº¯ CPU æ¨¡å¼è¿è¡Œï¼ˆå¤„ç†é€Ÿåº¦è¾ƒæ…¢ï¼‰ï¼š

#### 1. ä¿®æ”¹ä¾èµ–

ç¼–è¾‘ `backend/requirements.txt`ï¼Œæ›¿æ¢ä»¥ä¸‹è¡Œï¼š

```diff
- torch==2.6.0+cu124
- torchaudio==2.6.0+cu124
+ torch==2.6.0
+ torchaudio==2.6.0

- paddlepaddle-gpu==2.6.1.post120
+ paddlepaddle==2.6.1
```

#### 2. å®‰è£…ä¾èµ–

```powershell
cd backend
.\.venv\Scripts\pip.exe install -r requirements.txt
```

> **æ³¨æ„**: CPU æ¨¡å¼ä¸‹å¤„ç† 1 å°æ—¶è§†é¢‘å¯èƒ½éœ€è¦ 10-30 åˆ†é’Ÿï¼ŒGPU æ¨¡å¼é€šå¸¸åªéœ€ 2-5 åˆ†é’Ÿã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„

```text
video2note_test/
â”œâ”€â”€ .env                             # ç¯å¢ƒå˜é‡ (Gemini API Key ç­‰)
â”œâ”€â”€ dev.bat                          # å¼€å‘æ¨¡å¼å¯åŠ¨è„šæœ¬ (ä»…ä¾›å¼€å‘è€…)
â”œâ”€â”€ build_and_run.bat                # ç”Ÿäº§æ¨¡å¼å¯åŠ¨è„šæœ¬ (æ¨è)
â”œâ”€â”€ README.md                        # æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ backend/                         # Python FastAPI åç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py                 # å…¥å£æ–‡ä»¶ï¼ŒLoguru æ—¥å¿—é…ç½®ï¼Œæ¨¡å‹é¢„åŠ è½½
â”‚   â”‚   â”œâ”€â”€ api/v1/endpoints.py     # API è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py           # è·¯å¾„é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ task_manager.py     # ä»»åŠ¡çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â”œâ”€â”€ video_service.py    # è§†é¢‘å¤„ç†æ ¸å¿ƒ (PPT æå–ç¼–æ’)
â”‚   â”‚       â”œâ”€â”€ gpu_frame_processor.py  # L1+L2 GPU å¸§å¤„ç†å™¨
â”‚   â”‚       â”œâ”€â”€ ocr_deduper.py      # L3 OCR è¯­ä¹‰å»é‡
â”‚   â”‚       â”œâ”€â”€ audio_service.py    # è¯­éŸ³è½¬å½•æœåŠ¡
â”‚   â”‚       â””â”€â”€ files_service.py    # æ–‡ä»¶æ¸…ç†å·¥å…·
â”‚   â”œâ”€â”€ output/{task_id}/           # ä»»åŠ¡è¾“å‡ºç›®å½•
â”‚   â”‚   â”œâ”€â”€ cropped_video/          # è£å‰ªåçš„è§†é¢‘
â”‚   â”‚   â”œâ”€â”€ ppt_images/             # PPT é¡µé¢æˆªå›¾
â”‚   â”‚   â”œâ”€â”€ ppt_output/             # æœ€ç»ˆ PPTX æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ transcripts/            # è½¬å½•æ–‡æœ¬
â”‚   â”œâ”€â”€ temp/                        # ä¸´æ—¶ä¸Šä¼ æ–‡ä»¶
â”‚   â”œâ”€â”€ logs/                        # æ—¥å¿—æ–‡ä»¶ (è‡ªåŠ¨è½®è½¬)
â”‚   â””â”€â”€ requirements.txt
â”‚
â””â”€â”€ frontend/                        # React å‰ç«¯
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ App.jsx                 # ä¸»åº”ç”¨ç»„ä»¶
    â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â”œâ”€â”€ Dropzone.jsx        # æ‹–æ‹½ä¸Šä¼ ç»„ä»¶
    â”‚   â”‚   â”œâ”€â”€ ProcessingView.jsx  # å¤„ç†è¿›åº¦ç»„ä»¶
    â”‚   â”‚   â””â”€â”€ SuccessCard.jsx     # æˆåŠŸç»“æœç»„ä»¶
    â”‚   â””â”€â”€ services/api.js         # API è¯·æ±‚å°è£…
    â”œâ”€â”€ tailwind.config.js
    â””â”€â”€ package.json
```

---

## ğŸ¯ æ ¸å¿ƒç®—æ³•è¯¦è§£

### ä¸‰å±‚æ¼æ–— PPT æå–

```
è¾“å…¥è§†é¢‘ (å¦‚ 1 å°æ—¶è¯¾ç¨‹å½•å±)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L1 ç‰©ç†å±‚: GPU å¸§å·®æ£€æµ‹                              â”‚
â”‚                                                     â”‚
â”‚  ç®—æ³•: Mean Absolute Difference (MAD)               â”‚
â”‚  åŸç†: è®¡ç®—ç›¸é‚»å¸§çš„åƒç´ çº§ç»å¯¹å·®å€¼å‡å€¼                   â”‚
â”‚  è¾“å‡º: åœºæ™¯ç‰‡æ®µåˆ—è¡¨ (å¦‚ 15 ä¸ªé™æ­¢åœºæ™¯)                 â”‚
â”‚                                                     â”‚
â”‚  å‚æ•°:                                              â”‚
â”‚    diff_threshold = 0.12    # å¸§å·®é˜ˆå€¼              â”‚
â”‚    min_scene_duration = 1.5 # æœ€å°åœºæ™¯æŒç»­æ—¶é—´ (ç§’)   â”‚
â”‚    sample_fps = 4           # é‡‡æ ·å¸§ç‡               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ åœºæ™¯ç‰‡æ®µ (çº¦ 15 ä¸ª)
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L2 è´¨é‡å±‚: æ‹‰æ™®æ‹‰æ–¯æ¸…æ™°åº¦æ‹©ä¼˜                         â”‚
â”‚                                                     â”‚
â”‚  ç®—æ³•: Laplacian Variance                           â”‚
â”‚  åŸç†: è¾¹ç¼˜æ£€æµ‹åè®¡ç®—æ–¹å·®ï¼Œæ–¹å·®è¶Šå¤§è¶Šæ¸…æ™°               â”‚
â”‚  è¾“å‡º: æ¯ä¸ªåœºæ™¯çš„"å† å†›å¸§" (æœ€æ¸…æ™°çš„é‚£ä¸€å¸§)             â”‚
â”‚                                                     â”‚
â”‚  æ ¸å¿ƒä»£ç :                                          â”‚
â”‚    laplacian = conv2d(frame, [[0,1,0],[1,-4,1],[0,1,0]])  â”‚
â”‚    sharpness = laplacian.var()                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ å† å†›å¸§ (çº¦ 15 å¼ )
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L3 è¯­ä¹‰å±‚: PaddleOCR æ–‡æœ¬å»é‡                        â”‚
â”‚                                                     â”‚
â”‚  ç®—æ³•: SequenceMatcher (Gestalt æ¨¡å¼åŒ¹é…)            â”‚
â”‚  åŸç†: æå–å¸§ä¸­æ–‡å­—ï¼Œä¸ä¸Šä¸€é¡µç›¸ä¼¼åº¦ > 90% åˆ™ä¸¢å¼ƒ       â”‚
â”‚  è¾“å‡º: å»é‡åçš„ PPT é¡µé¢ (å¦‚ 8 é¡µ)                    â”‚
â”‚                                                     â”‚
â”‚  å‚æ•°:                                              â”‚
â”‚    similarity_threshold = 0.90  # æ–‡æœ¬ç›¸ä¼¼åº¦é˜ˆå€¼     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ å»é‡åé¡µé¢ (çº¦ 8 é¡µ)
                       â–¼
                   ç”Ÿæˆ PPTX
```

### éŸ³é¢‘è½¬å½•æµç¨‹

```
è¾“å…¥è§†é¢‘
    â”‚
    â–¼ moviepy æå–éŸ³é¢‘.write_audiofile(fps=16000, mono)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸´æ—¶ WAV æ–‡ä»¶         â”‚
â”‚  16kHz å•å£°é“ PCM      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼ FunASR AutoModel.generate()
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åŸå§‹è¯†åˆ«æ–‡æœ¬          â”‚
â”‚  (å¯èƒ½åŒ…å«é”™åˆ«å­—)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼ Gemini 2.5 Flash (å¯é€‰)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çº é”™åæ–‡æœ¬            â”‚
â”‚  â€¢ ä¿®æ­£åŒéŸ³é”™åˆ«å­—       â”‚
â”‚  â€¢ æ·»åŠ æ­£ç¡®æ ‡ç‚¹         â”‚
â”‚  â€¢ é€šé¡ºåŒ–å¤„ç†           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
        ä¿å­˜ .txt æ–‡ä»¶
```

---

## ğŸ“¡ API æ¥å£

### 1. ä¸Šä¼ è§†é¢‘

```http
POST /api/v1/tasks/upload
Content-Type: multipart/form-data
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤ | è¯´æ˜ |
|------|------|------|------|------|
| `file` | File | âœ… | - | è§†é¢‘æ–‡ä»¶ (.mp4, .mov, .avi, .mkv) |
| `enable_ppt_extraction` | bool | âŒ | `true` | å¯ç”¨ PPT æå– |
| `enable_audio_transcription` | bool | âŒ | `false` | å¯ç”¨è¯­éŸ³è½¬å½• |

**å“åº”ç¤ºä¾‹**:

```json
{
    "task_id": "5b0a3181-c9a2-4db0-b731-770f55482bf9",
    "status": "processing",
    "message": "ä»»åŠ¡å·²æäº¤"
}
```

### 2. æŸ¥è¯¢çŠ¶æ€

```http
GET /api/v1/tasks/{task_id}/status
```

**å“åº”ç¤ºä¾‹** (å¤„ç†ä¸­):

```json
{
    "status": "processing",
    "progress": 65,
    "message": "OCR å»é‡æ£€æŸ¥: ç¬¬ 12 ä¸ªå€™é€‰å¸§"
}
```

**å“åº”ç¤ºä¾‹** (å®Œæˆ):

```json
{
    "status": "completed",
    "progress": 100,
    "message": "ä»»åŠ¡å®Œæˆ",
    "result_url": "/static/{task_id}/ppt_output/{task_id}.pptx",
    "transcript_url": "/static/{task_id}/transcripts/{task_id}.txt"
}
```

### 3. ä¸‹è½½æ–‡ä»¶

```http
GET /static/{task_id}/ppt_output/{task_id}.pptx
GET /static/{task_id}/transcripts/{task_id}.txt
```

---

## âš™ï¸ é…ç½®å‚æ•°

### ç®—æ³•å‚æ•°è°ƒä¼˜

ä¿®æ”¹ä½ç½®: `backend/app/services/video_service.py`

```python
# åˆ›å»ºå®ä¾‹æ—¶å¯è°ƒæ•´å‚æ•°
self.frame_processor = GPUFrameProcessor(
    diff_threshold=0.12,      # å¸§å·®é˜ˆå€¼ (0.08-0.25)
    min_scene_duration=1.5,   # æœ€å°åœºæ™¯æŒç»­æ—¶é—´ (ç§’)
    sample_fps=4              # é‡‡æ ·å¸§ç‡
)

self.ocr_deduper = OCRDeduper(
    similarity_threshold=0.90  # æ–‡æœ¬ç›¸ä¼¼åº¦é˜ˆå€¼ (0.80-0.95)
)
```

| åœºæ™¯ | diff_threshold å»ºè®® |
|------|---------------------|
| çº¯é™æ€ PPT | 0.08 - 0.12 |
| å«åŠ¨ç”»æ•ˆæœ | 0.15 - 0.20 |
| å«åµŒå…¥è§†é¢‘ | 0.20 - 0.25 |

### æ—¥å¿—é…ç½®

ä¿®æ”¹ä½ç½®: `backend/app/main.py`

```python
# æ§åˆ¶å°æ—¥å¿—çº§åˆ«
logger.add(sys.stderr, level="DEBUG")  # DEBUG/INFO/WARNING/ERROR

# æ–‡ä»¶æ—¥å¿—è½®è½¬
logger.add(
    "logs/backend_{time:YYYY-MM-DD}.log",
    rotation="00:00",    # æ¯å¤©è½®è½¬
    retention="7 days",  # ä¿ç•™ 7 å¤©
    level="DEBUG"
)
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### 1. PaddleOCR åˆå§‹åŒ–å¤±è´¥

**é”™è¯¯**: `[WinError 127] æ‰¾ä¸åˆ°æŒ‡å®šçš„ç¨‹åº`

**åŸå› **: Windows ç¼ºå°‘ `zlibwapi.dll`

**è§£å†³**:
1. ä¸‹è½½: [zlib123dllx64.zip](http://www.winimage.com/zLibDll/zlib123dllx64.zip)
2. è§£å‹åå°† `zlibwapi.dll` æ”¾åˆ° `backend/libs/` ç›®å½• (è‡ªåŠ¨è¯†åˆ«)
3. é‡å¯åç«¯æœåŠ¡

---

### 2. FFmpeg è£å‰ªå´©æºƒ

**é”™è¯¯**: `returncode=3221225477` æˆ– `ACCESS_VIOLATION`

**åŸå› **: NVENC å¯¹è¾“å…¥å°ºå¯¸æœ‰è¦æ±‚

**ç°çŠ¶**: ä»£ç å·²è‡ªåŠ¨å¤„ç† (bbox å¯¹é½åˆ°å¶æ•° + CPU å›é€€)

---

### 3. åç«¯å¯åŠ¨å¡ä½

**ç°è±¡**: ç»ˆç«¯æ— å“åº”ï¼Œè®¿é—® 8000 ç«¯å£ç™½å±

**åŸå› **: FunASR é¦–æ¬¡è¿è¡Œä¸‹è½½æ¨¡å‹ (çº¦ 1-2GB)

**è§£å†³**: ç­‰å¾…ä¸‹è½½å®Œæˆï¼Œè§‚å¯Ÿæ—¥å¿—ä¸­æ˜¯å¦æœ‰ `Downloading` å­—æ ·

---

### 4. è½¬å½•ç»“æœä¸ºç©º

**æ’æŸ¥**:
1. ç¡®è®¤è§†é¢‘æœ‰éŸ³é¢‘è½¨é“: `ffprobe video.mp4`
2. æ£€æŸ¥æ—¥å¿—æ˜¯å¦æœ‰ `FunASR æ¨¡å‹åŠ è½½æˆåŠŸ`
3. Gemini API Key æœªé…ç½®åªå½±å“çº é”™ï¼Œä¸å½±å“æœ¬åœ°è¯†åˆ«

---

### 5. å‰ç«¯è·¨åŸŸé”™è¯¯

**é”™è¯¯**: `Access-Control-Allow-Origin`

**è§£å†³**: ç¡®è®¤åç«¯ CORS å·²é…ç½®:

```python
# backend/app/main.py
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_methods=["*"],
    allow_headers=["*"],
)
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|------|----------|
| v2.1 | 2026-01-01 | å¼•å…¥ Loguru æ—¥å¿—ç³»ç»Ÿï¼Œä¼˜åŒ–ä»£ç æ³¨é‡Š |
| v2.0 | 2025-12-31 | é‡æ„ä¸ºä¸‰å±‚æ¼æ–—æ¨¡å‹ï¼Œæ–°å¢ OCR è¯­ä¹‰å»é‡ |
| v1.5 | 2025-12-31 | è§£è€¦ PPT æå–ä¸éŸ³é¢‘è½¬å½•ä¸ºç‹¬ç«‹æ¨¡å— |
| v1.0 | 2025-12-30 | åˆå§‹ç‰ˆæœ¬ï¼Œæ»‘åŠ¨çª—å£ä¸€è‡´æ€§æ£€æµ‹ |

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

Â© 2025 Video2Note AI. Built for Creators.